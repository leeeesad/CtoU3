<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U å…Œæ›å°ˆæ¥­è¨ˆç®—å™¨ (å«æº¢åƒ¹æ¨¡æ“¬)</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #f4f7f9; display: flex; justify-content: center; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 480px; }
        h2 { text-align: center; color: #333; margin-bottom: 20px; }
        .config-section { background: #fff9f0; border: 1px solid #ffeaa7; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        label { display: block; margin-bottom: 5px; color: #666; font-size: 13px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 15px; }
        .highlight-input { border: 2px solid #007bff; background: #f0f7ff; }
        .result-card { background: #2d3436; color: white; padding: 20px; border-radius: 12px; margin-top: 20px; }
        .result-item { margin-bottom: 10px; }
        .result-label { font-size: 12px; color: #bdc3c7; }
        .result-value { font-size: 22px; font-weight: bold; color: #00cec9; }
        .premium-note { font-size: 12px; color: #d63031; margin-top: 5px; }
        .btn-sync { width: 100%; background: #0984e3; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; margin-bottom: 15px; font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <h2>U å…Œæ›å°ˆæ¥­è¨ˆç®—å™¨</h2>
    
    <button class="btn-sync" onclick="getRates()">ğŸ”„ åŒæ­¥åœ‹éš›ä¸­é–“åƒ¹</button>

    <div class="config-section">
        <label>âš™ï¸ åŒ¯ç‡èˆ‡æº¢åƒ¹è¨­ç½®</label>
        <div class="grid">
            <div class="input-group">
                <label>åœ‹éš›ä¸­é–“åƒ¹ (HKD)</label>
                <input type="number" id="baseHkd" step="0.001" value="7.80" oninput="convert()">
            </div>
            <div class="input-group">
                <label>U å…Œäººæ°‘å¹£ (CNY)</label>
                <input type="number" id="rmbRate" step="0.01" value="7.12" oninput="convert()">
            </div>
        </div>
        <div style="margin-top: 12px;">
            <label style="color: #d63031;">âš ï¸ åº—å®¶ä¸Šæµ®/æº¢åƒ¹ (å¦‚ 0.15)</label>
            <input type="number" id="premium" step="0.01" value="0.15" class="highlight-input" oninput="convert()">
            <div class="premium-note" id="actualRateTip">å¯¦éš›åŸ·è¡ŒåŒ¯ç‡ï¼š7.95</div>
        </div>
    </div>

    <div class="input-group">
        <label>ğŸ’° æŒæœ‰æ¸¯å¹£é‡‘é¡ (HKD)</label>
        <input type="number" id="hkdAmount" placeholder="ä¾‹å¦‚ï¼š10000" oninput="convert()">
    </div>

    <div class="result-card">
        <div class="result-item">
            <div class="result-label">é è¨ˆç²å¾— U æ•¸é‡</div>
            <div id="usdtResult" class="result-value">0.00 U</div>
        </div>
        <div class="result-item" style="margin-bottom: 0;">
            <div class="result-label">æœ€çµ‚æ›å¾—äººæ°‘å¹£ (RMB)</div>
            <div id="rmbResult" class="result-value" style="color: #55efc4;">Â¥ 0.00</div>
        </div>
    </div>

    <p style="font-size: 11px; color: #999; text-align: center; margin-top: 15px;">
        å…¬å¼ï¼šæ¸¯å¹£ Ã· (ä¸­é–“åƒ¹ + æº¢åƒ¹) Ã— äººæ°‘å¹£åŒ¯ç‡
    </p>
</div>

<script>
    async function getRates() {
        const btn = document.querySelector('.btn-sync');
        btn.innerText = "åŒæ­¥ä¸­...";
        try {
            const res = await fetch('https://open.er-api.com/v6/latest/USD');
            const data = await res.json();
            document.getElementById('baseHkd').value = data.rates.HKD.toFixed(3);
            document.getElementById('rmbRate').value = data.rates.CNY.toFixed(2);
            btn.innerText = "âœ… å·²æ›´æ–°è‡³æœ€æ–°ä¸­é–“åƒ¹";
            setTimeout(() => { btn.innerText = "ğŸ”„ åŒæ­¥åœ‹éš›ä¸­é–“åƒ¹"; }, 2000);
            convert();
        } catch (e) {
            alert("ç¶²çµ¡éŒ¯èª¤ï¼Œè«‹æ‰‹å‹•è¼¸å…¥");
        }
    }

    function convert() {
        const amount = parseFloat(document.getElementById('hkdAmount').value) || 0;
        const baseHkd = parseFloat(document.getElementById('baseHkd').value) || 0;
        const rmbRate = parseFloat(document.getElementById('rmbRate').value) || 0;
        const premium = parseFloat(document.getElementById('premium').value) || 0;

        const actualRate = baseHkd + premium;
        document.getElementById('actualRateTip').innerText = "å¯¦éš›åŸ·è¡ŒåŒ¯ç‡ï¼š1 U = " + actualRate.toFixed(3) + " HKD";

        if (actualRate > 0) {
            const usdt = amount / actualRate;
            const rmb = usdt * rmbRate;

            document.getElementById('usdtResult').innerText = usdt.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}) + " U";
            document.getElementById('rmbResult').innerText = "Â¥ " + rmb.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
        }
    }
    // åˆå§‹åŒ–
    convert();
</script>

</body>
</html>
